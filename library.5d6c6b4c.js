function e(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},i=r.parcelRequired7c6;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return a[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},r.parcelRequired7c6=i),i.register("kyEFX",(function(t,r){var a,n;e(t.exports,"register",(function(){return a}),(function(e){return a=e})),e(t.exports,"resolve",(function(){return n}),(function(e){return n=e}));var i={};a=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)i[t[r]]=e[t[r]]},n=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i("kyEFX").register(JSON.parse('{"85Ywi":"library.5d6c6b4c.js","9u86a":"oops.8ae0f690.jpg","708jO":"library.8c0d590e.js"}'));var l;l=new URL(i("kyEFX").resolve("9u86a"),import.meta.url).toString();var o=i("2shzp");const s=document.querySelector(".header__list"),c=document.querySelector("[data-movies]"),d=document.querySelector(".close-library-modal"),u=document.querySelector(".library-backdrop"),f=document.querySelector(".library-modal-trailer"),m=document.querySelector("#modal-div-link"),p=document.querySelector(".library-modal-btn");let b=localStorage.getItem("STORAGE_KEY_WATCHED"),g=localStorage.getItem("STORAGE_KEY_QUEUE"),y="";function E(){y.forEach((e=>{!async function(e){await o.get(`https://api.themoviedb.org/3/movie/${e}?api_key=5fe2b2c003e2bf661ee6b8424d931ac2&language=en-US`).then((e=>{!function(e){const r=e.genres.map((e=>e.name)),a=`<li class="films__item" data-id = ${e.id}>\n      <img src=${e.poster_path?"https://image.tmdb.org/t/p/w500"+e.poster_path:t(l)} alt=${e.title} class="film_img"/>\n      <p class="film__name">${e.title}</p>\n      <p class="film__description">${r} | ${e.release_date.slice(0,4)}</p>\n    </li>`;c.innerHTML+=a}(e.data)}))}(e)}))}function _(e){(e.target.classList.contains("library-backdrop")||"Escape"===e.code||e.target.classList.contains("close-library-modal")||e.target.classList.contains("library-modal-img"))&&(u.classList.add("library-backdrop-is-hiden"),f.innerHTML="",window.removeEventListener("keydown",_),u.removeEventListener("click",_),console.clear())}!function(){if(c.innerHTML="",null===g&&null===b||"[]"===g&&"[]"===b||null===g&&"[]"===b||"[]"===g&&null===b){const e='<div class="library__empty-container"><div class="library__empty"><div class="left__eye"></div><div class="right__eye"></div></div><p class="library__text-white">Your library is <span class="library__text-red">empty!</span></p></div>';return void(c.innerHTML=e)}null===g?(y=JSON.parse(b),E()):null===b?(y=JSON.parse(g),E()):(y=JSON.parse(b).concat(JSON.parse(g)),E())}(),s.addEventListener("click",(function(e){"MY LIBRARY"===e.target.innerText&&E()})),c.addEventListener("click",(function(e){const t=e.target.closest(".films__item");if(!t)return;{const e=t.getAttribute("data-id");p.disabled=!1,u.classList.remove("library-backdrop-is-hiden"),window.addEventListener("keydown",_),u.addEventListener("click",_),async function(e){await o.get(`https://api.themoviedb.org/3/movie/${e}?api_key=5fe2b2c003e2bf661ee6b8424d931ac2&language=en-US`).then((e=>e.data.homepage)).then((e=>{if(""===e)m.innerHTML="";else{const t=`<a href="${e}" rel=" noopener noreferrer nofollow " target = "blank" class="library-modal-link">NETFLIX</a>`;m.innerHTML=t}}))}(e),async function(e){await o.get(`https://api.themoviedb.org/3/movie/${e}/videos?api_key=5fe2b2c003e2bf661ee6b8424d931ac2&language=en-US`).then((t=>{if(0!==t.data.results.length)return t.data.results.map((t=>{if("YouTube"===t.site){const r=`<iframe class="library-modal-iframe" data-id = "${e}" \n   src="https://www.youtube.com/embed/${t.key}?&autoplay=1"\n   frameborder="0" allowfullscreen></iframe>`;f.innerHTML=r}}));f.innerHTML=`<div class = "library-modal-iframe" data-id = ${e}></div>`}))}(e),r=e,b.includes(r)?p.innerText="REMOVE FROM WATCHED":p.innerText="REMOVE FROM QUEUE"}var r})),d.addEventListener("click",_),p.addEventListener("click",(function(e){e.currentTarget.disabled=!0;const t=u.querySelector(".library-modal-iframe").getAttribute("data-id");if(document.querySelector(`[data-id="${t}"]`).remove(),b.includes(t)){const e=localStorage.getItem("STORAGE_KEY_WATCHED"),r=JSON.parse(e).filter((e=>e!==t)),a=JSON.stringify(r);localStorage.removeItem("STORAGE_KEY_WATCHED"),localStorage.setItem("STORAGE_KEY_WATCHED",a),_()}else{const e=localStorage.getItem("STORAGE_KEY_QUEUE"),r=JSON.parse(e).filter((e=>e!==t)),a=JSON.stringify(r);localStorage.removeItem("STORAGE_KEY_QUEUE"),localStorage.setItem("STORAGE_KEY_QUEUE",a),_()}}));
//# sourceMappingURL=library.5d6c6b4c.js.map
