{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-a727598f9d233344.js","src/js/library-all.js","node_modules/@parcel/runtime-js/lib/runtime-e0bac94d4138de2e.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz)-extension):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"b2DKV\\\":\\\"library.3e4c89cf.js\\\",\\\"7RJVl\\\":\\\"oops.8ae0f690.jpg\\\",\\\"2RCfg\\\":\\\"library.37a79bcb.js\\\"}\"));","const axios = require('axios');\nimport imageURL from '../images/oops.jpg';\nconst API_KEY = '5fe2b2c003e2bf661ee6b8424d931ac2';\nconst IMG_REGUEST = 'https://image.tmdb.org/t/p/w500';\n\nconst myLibraryEl = document.querySelector('.header__list');\nconst filmListEl = document.querySelector('[data-movies]');\n\nconst closeBtn = document.querySelector('.close-library-modal');\nconst backdropEl = document.querySelector('.library-backdrop');\nconst playerEl = document.querySelector('.library-modal-trailer');\nconst linkBox = document.querySelector('#modal-div-link');\nconst libraryRemoveBtn = document.querySelector('.library-modal-btn');\n\nlet watchedEl = localStorage.getItem('STORAGE_KEY_WATCHED');\n\nlet queueEl = localStorage.getItem('STORAGE_KEY_QUEUE');\n\nlet libraryAllEl = '';\ncheckedLS();\n\nmyLibraryEl.addEventListener('click', checkEventLibrary);\nfilmListEl.addEventListener('click', checkEventModal);\ncloseBtn.addEventListener('click', closeModal);\n\nlibraryRemoveBtn.addEventListener('click', deleteFromLibraryAndLS);\n\nfunction checkedLS() {\n  filmListEl.innerHTML = '';\n  if (\n    (queueEl === null && watchedEl === null) ||\n    (queueEl === '[]' && watchedEl === '[]') ||\n    (queueEl === null && watchedEl === '[]') ||\n    (queueEl === '[]' && watchedEl === null)\n  ) {\n    const marckup = `<div class=\"library__empty-container\"><div class=\"library__empty\"><div class=\"left__eye\"></div><div class=\"right__eye\"></div></div><p class=\"library__text-white\">Your library is <span class=\"library__text-red\">empty!</span></p></div>`;\n    filmListEl.innerHTML = marckup;\n    return;\n  } else if (queueEl === null) {\n    libraryAllEl = JSON.parse(watchedEl);\n    getId();\n  } else if (watchedEl === null) {\n    libraryAllEl = JSON.parse(queueEl);\n    getId();\n  } else {\n    libraryAllEl = JSON.parse(watchedEl).concat(JSON.parse(queueEl));\n    getId();\n  }\n}\n\nfunction checkEventLibrary(evt) {\n  if (evt.target.innerText === 'MY LIBRARY') {\n    getId();\n  }\n}\n\nfunction getId() {\n  // if (libraryAllEl.length === 0) {\n  //   return;\n  // }\n  libraryAllEl.forEach(element => {\n    getElementById(element);\n  });\n}\n\nasync function getElementById(id) {\n  const respounse = await axios\n    .get(\n      `https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}&language=en-US`\n    )\n    .then(respounse => {\n      renderMarckup(respounse.data);\n    });\n}\n\nfunction renderMarckup(data) {\n  const genres = data.genres.map(el => el.name);\n  const marckup = `<li class=\"films__item\" data-id = ${data.id}>\n      <img src=${\n        data.poster_path ? IMG_REGUEST + data.poster_path : imageURL\n      } alt=${data.title} class=\"film_img\"/>\n      <p class=\"film__name\">${data.title}</p>\n      <p class=\"film__description\">${genres} | ${data.release_date.slice(\n    0,\n    4\n  )}</p>\n    </li>`;\n\n  filmListEl.innerHTML += marckup;\n}\n\nfunction checkEventModal(evt) {\n  const target = evt.target.closest('.films__item');\n  if (target) {\n    const idAttribute = target.getAttribute('data-id');\n    openModal();\n    renderModalLink(idAttribute);\n    getVideoUrlAndRenderPlayer(idAttribute);\n    chekModalBtn(idAttribute);\n  } else {\n    return;\n  }\n}\n\nfunction openModal() {\n  libraryRemoveBtn.disabled = false;\n  backdropEl.classList.remove('library-backdrop-is-hiden');\n  window.addEventListener('keydown', closeModal);\n  backdropEl.addEventListener('click', closeModal);\n}\n\nfunction closeModal(e) {\n  if (\n    e.target.classList.contains('library-backdrop') ||\n    e.code === 'Escape' ||\n    e.target.classList.contains('close-library-modal') ||\n    e.target.classList.contains('library-modal-img')\n  ) {\n    backdropEl.classList.add('library-backdrop-is-hiden');\n    playerEl.innerHTML = '';\n    window.removeEventListener('keydown', closeModal);\n    backdropEl.removeEventListener('click', closeModal);\n    console.clear();\n  }\n}\n\nasync function getVideoUrlAndRenderPlayer(movie) {\n  const data = await axios\n    .get(\n      `https://api.themoviedb.org/3/movie/${movie}/videos?api_key=${API_KEY}&language=en-US`\n    )\n    .then(results => {\n      if (results.data.results.length === 0) {\n        playerEl.innerHTML = `<div class = \"library-modal-iframe\" data-id = ${movie}></div>`;\n        return;\n      }\n      return results.data.results.map(el => {\n        if (el.site === 'YouTube') {\n          const marcup = `<iframe class=\"library-modal-iframe\" data-id = \"${movie}\" \n   src=\"https://www.youtube.com/embed/${el.key}?&autoplay=1\"\n   frameborder=\"0\" allowfullscreen></iframe>`;\n          playerEl.innerHTML = marcup;\n        }\n      });\n    });\n}\n\nasync function renderModalLink(movie) {\n  const respounse = await axios\n    .get(\n      `https://api.themoviedb.org/3/movie/${movie}?api_key=${API_KEY}&language=en-US`\n    )\n    .then(respounse => {\n      const homepage = respounse.data.homepage;\n      return homepage;\n    })\n    .then(homepage => {\n      if (homepage === '') {\n        linkBox.innerHTML = '';\n      } else {\n        const marckup = `<a href=\"${homepage}\" rel=\" noopener noreferrer nofollow \" target = \"blank\" class=\"library-modal-link\">NETFLIX</a>`;\n        linkBox.innerHTML = marckup;\n      }\n    });\n}\n\nfunction chekModalBtn(id) {\n  if (watchedEl.includes(id)) {\n    libraryRemoveBtn.innerText = 'REMOVE FROM WATCHED';\n  } else {\n    libraryRemoveBtn.innerText = 'REMOVE FROM QUEUE';\n  }\n}\n\nfunction deleteFromLibraryAndLS(evt) {\n  evt.currentTarget.disabled = true;\n  const element = backdropEl.querySelector('.library-modal-iframe');\n  const idAttribute = element.getAttribute('data-id');\n  const findEl = document.querySelector(`[data-id=\"${idAttribute}\"]`);\n  findEl.remove();\n\n  if (watchedEl.includes(idAttribute)) {\n    const watchEl = localStorage.getItem('STORAGE_KEY_WATCHED');\n    const arraysWatchId = JSON.parse(watchEl);\n    const newWatchArrId = arraysWatchId.filter(item => item !== idAttribute);\n    const newWatchedString = JSON.stringify(newWatchArrId);\n    localStorage.removeItem('STORAGE_KEY_WATCHED');\n    localStorage.setItem('STORAGE_KEY_WATCHED', newWatchedString);\n    // location.reload();\n    closeModal();\n    // checkedLS();\n  } else {\n    const queEl = localStorage.getItem('STORAGE_KEY_QUEUE');\n    const arraysQueId = JSON.parse(queEl);\n    const newQueArrId = arraysQueId.filter(item => item !== idAttribute);\n    const newQueueString = JSON.stringify(newQueArrId);\n    localStorage.removeItem('STORAGE_KEY_QUEUE');\n    localStorage.setItem('STORAGE_KEY_QUEUE', newQueueString);\n    // location.reload();\n    closeModal();\n    // checkedLS();\n  }\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('b2DKV') + require('./helpers/bundle-manifest').resolve(\"7RJVl\");"],"names":["$0380ce8f1f064ccc$export$6503ec6e8aabbaf","$0380ce8f1f064ccc$export$f7ad0328861e2f03","$0380ce8f1f064ccc$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","$7dd1ddf6834435ca$export$bdfd709ae4826697","$7dd1ddf6834435ca$var$bundleURL","$7dd1ddf6834435ca$var$getBaseURL","url","replace","value","err","matches","stack","match","$7dd1ddf6834435ca$var$getBundleURL","parcelRequire","register","JSON","parse","$bpxeT","$02f1e82860f53c3c$exports","getBundleURL","resolve","$cb4bc96a92fd6d06$var$API_KEY","$cb4bc96a92fd6d06$var$myLibraryEl","document","querySelector","$cb4bc96a92fd6d06$var$filmListEl","$cb4bc96a92fd6d06$var$closeBtn","$cb4bc96a92fd6d06$var$backdropEl","$cb4bc96a92fd6d06$var$playerEl","$cb4bc96a92fd6d06$var$linkBox","$cb4bc96a92fd6d06$var$libraryRemoveBtn","$cb4bc96a92fd6d06$var$watchedEl","localStorage","getItem","$cb4bc96a92fd6d06$var$queueEl","$cb4bc96a92fd6d06$var$libraryAllEl","$cb4bc96a92fd6d06$var$getId","forEach","element","$cb4bc96a92fd6d06$var$_getElementById","apply","this","arguments","$cb4bc96a92fd6d06$var$getElementById","$parcel$interopDefault","$2TvXO","mark","_callee","$dIxxU","get","concat","then","respounse","$cb4bc96a92fd6d06$var$renderMarckup","data","_ctx","sent","genres","map","el","name","marckup","poster_path","title","release_date","slice","innerHTML","$cb4bc96a92fd6d06$var$closeModal","e","target","classList","contains","code","add","window","removeEventListener","console","clear","$cb4bc96a92fd6d06$var$_getVideoUrlAndRenderPlayer","movie","results","site","marcup","key","$cb4bc96a92fd6d06$var$_renderModalLink","homepage","$cb4bc96a92fd6d06$var$checkedLS","addEventListener","evt","innerText","closest","idAttribute","getAttribute","disabled","remove","$cb4bc96a92fd6d06$var$renderModalLink","$cb4bc96a92fd6d06$var$getVideoUrlAndRenderPlayer","includes","currentTarget","watchEl","newWatchArrId","filter","item","newWatchedString","stringify","removeItem","setItem","queEl","newQueArrId","newQueueString"],"version":3,"file":"library.3e4c89cf.js.map"}