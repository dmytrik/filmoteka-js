!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=r.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},r.parcelRequired7c6=i),i.register("iE7OH",(function(t,r){var n,a;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return a}),(function(e){return a=e}));var i={};n=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)i[t[r]]=e[t[r]]},a=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i.register("aNJCr",(function(t,r){var n;e(t.exports,"getBundleURL",(function(){return n}),(function(e){return n=e}));var a={};function i(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(e){var t=a[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return i(e[2])}return"/"}(),a[e]=t),t}})),i("iE7OH").register(JSON.parse('{"b2DKV":"library.3e4c89cf.js","7RJVl":"oops.8ae0f690.jpg","2RCfg":"library.37a79bcb.js"}'));var o,c=i("bpxeT"),l=i("2TvXO");o=i("aNJCr").getBundleURL("b2DKV")+i("iE7OH").resolve("7RJVl");var s=i("dIxxU"),u="5fe2b2c003e2bf661ee6b8424d931ac2",d=document.querySelector(".header__list"),f=document.querySelector("[data-movies]"),p=document.querySelector(".close-library-modal"),m=document.querySelector(".library-backdrop"),v=document.querySelector(".library-modal-trailer"),g=document.querySelector("#modal-div-link"),b=document.querySelector(".library-modal-btn"),y=localStorage.getItem("STORAGE_KEY_WATCHED"),E=localStorage.getItem("STORAGE_KEY_QUEUE"),_="";function h(){_.forEach((function(e){!function(e){S.apply(this,arguments)}(e)}))}function S(){return(S=t(c)(t(l).mark((function e(r){return t(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("https://api.themoviedb.org/3/movie/".concat(r,"?api_key=").concat(u,"&language=en-US")).then((function(e){T(e.data)}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var r=e.genres.map((function(e){return e.name})),n='<li class="films__item" data-id = '.concat(e.id,">\n      <img src=").concat(e.poster_path?"https://image.tmdb.org/t/p/w500"+e.poster_path:t(o)," alt=").concat(e.title,' class="film_img"/>\n      <p class="film__name">').concat(e.title,'</p>\n      <p class="film__description">').concat(r," | ").concat(e.release_date.slice(0,4),"</p>\n    </li>");f.innerHTML+=n}function w(e){(e.target.classList.contains("library-backdrop")||"Escape"===e.code||e.target.classList.contains("close-library-modal")||e.target.classList.contains("library-modal-img"))&&(m.classList.add("library-backdrop-is-hiden"),v.innerHTML="",window.removeEventListener("keydown",w),m.removeEventListener("click",w),console.clear())}function O(){return(O=t(c)(t(l).mark((function e(r){return t(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("https://api.themoviedb.org/3/movie/".concat(r,"/videos?api_key=").concat(u,"&language=en-US")).then((function(e){if(0!==e.data.results.length)return e.data.results.map((function(e){if("YouTube"===e.site){var t='<iframe class="library-modal-iframe" data-id = "'.concat(r,'" \n   src="https://www.youtube.com/embed/').concat(e.key,'?&autoplay=1"\n   frameborder="0" allowfullscreen></iframe>');v.innerHTML=t}}));v.innerHTML='<div class = "library-modal-iframe" data-id = '.concat(r,"></div>")}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=t(c)(t(l).mark((function e(r){return t(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.get("https://api.themoviedb.org/3/movie/".concat(r,"?api_key=").concat(u,"&language=en-US")).then((function(e){return e.data.homepage})).then((function(e){if(""===e)g.innerHTML="";else{var t='<a href="'.concat(e,'" rel=" noopener noreferrer nofollow " target = "blank" class="library-modal-link">NETFLIX</a>');g.innerHTML=t}}));case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){if(f.innerHTML="",null===E&&null===y||"[]"===E&&"[]"===y||null===E&&"[]"===y||"[]"===E&&null===y){return void(f.innerHTML='<div class="library__empty-container"><div class="library__empty"><div class="left__eye"></div><div class="right__eye"></div></div><p class="library__text-white">Your library is <span class="library__text-red">empty!</span></p></div>')}null===E?(_=JSON.parse(y),h()):null===y?(_=JSON.parse(E),h()):(_=JSON.parse(y).concat(JSON.parse(E)),h())}(),d.addEventListener("click",(function(e){"MY LIBRARY"===e.target.innerText&&h()})),f.addEventListener("click",(function(e){var t=e.target.closest(".films__item");if(!t)return;var r=t.getAttribute("data-id");b.disabled=!1,m.classList.remove("library-backdrop-is-hiden"),window.addEventListener("keydown",w),m.addEventListener("click",w),function(e){L.apply(this,arguments)}(r),function(e){O.apply(this,arguments)}(r),n=r,y.includes(n)?b.innerText="REMOVE FROM WATCHED":b.innerText="REMOVE FROM QUEUE";var n})),p.addEventListener("click",w),b.addEventListener("click",(function(e){e.currentTarget.disabled=!0;var t=m.querySelector(".library-modal-iframe").getAttribute("data-id");if(document.querySelector('[data-id="'.concat(t,'"]')).remove(),y.includes(t)){var r=localStorage.getItem("STORAGE_KEY_WATCHED"),n=JSON.parse(r).filter((function(e){return e!==t})),a=JSON.stringify(n);localStorage.removeItem("STORAGE_KEY_WATCHED"),localStorage.setItem("STORAGE_KEY_WATCHED",a),w()}else{var i=localStorage.getItem("STORAGE_KEY_QUEUE"),o=JSON.parse(i).filter((function(e){return e!==t})),c=JSON.stringify(o);localStorage.removeItem("STORAGE_KEY_QUEUE"),localStorage.setItem("STORAGE_KEY_QUEUE",c),w()}}))}();
//# sourceMappingURL=library.3e4c89cf.js.map
